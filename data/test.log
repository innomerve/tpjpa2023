/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
drop table if exists Discussion CASCADE 
drop table if exists Tag CASCADE 
drop table if exists Tag_Ticket CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Discussion (id bigint not null, contenu varchar(255), author_id bigint, ticket_id bigint, primary key (id))
create table Tag (id bigint not null, label varchar(255), primary key (id))
create table Tag_Ticket (tags_id bigint not null, tickets_id bigint not null)
create table Ticket (id bigint not null, closeAt timestamp, content varchar(255), createdAt timestamp, title varchar(255), author_id bigint, primary key (id))
create table User (id bigint not null, name varchar(255), primary key (id))
alter table Discussion add constraint FKnlhgmbi4c0d2wh8ct7rqnrtig foreign key (author_id) references User
alter table Discussion add constraint FKfqtupq1id3j5xyhiovk0lamwt foreign key (ticket_id) references Ticket
alter table Tag_Ticket add constraint FKngiik6u2gyi8oekx6qhby7u7e foreign key (tickets_id) references Ticket
alter table Tag_Ticket add constraint FKdgcd1cknkv09yy5kvgyxwq9yp foreign key (tags_id) references Tag
alter table Ticket add constraint FK9elxf4d28my4akdcnb1099hgi foreign key (author_id) references User
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
drop table if exists Discussion CASCADE 
drop table if exists Tag CASCADE 
drop table if exists Tag_Ticket CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Discussion (id bigint not null, contenu varchar(255), author_id bigint, ticket_id bigint, primary key (id))
create table Tag (id bigint not null, label varchar(255), primary key (id))
create table Tag_Ticket (tags_id bigint not null, tickets_id bigint not null)
create table Ticket (id bigint not null, closeAt timestamp, content varchar(255), createdAt timestamp, title varchar(255), author_id bigint, primary key (id))
create table User (id bigint not null, name varchar(255), primary key (id))
alter table Discussion add constraint FKnlhgmbi4c0d2wh8ct7rqnrtig foreign key (author_id) references User
alter table Discussion add constraint FKfqtupq1id3j5xyhiovk0lamwt foreign key (ticket_id) references Ticket
alter table Tag_Ticket add constraint FKngiik6u2gyi8oekx6qhby7u7e foreign key (tickets_id) references Ticket
alter table Tag_Ticket add constraint FKdgcd1cknkv09yy5kvgyxwq9yp foreign key (tags_id) references Tag
alter table Ticket add constraint FK9elxf4d28my4akdcnb1099hgi foreign key (author_id) references User
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
drop table if exists Discussion CASCADE 
drop table if exists Tag CASCADE 
drop table if exists Tag_Ticket CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Discussion (id bigint not null, contenu varchar(255), author_id bigint, ticket_id bigint, primary key (id))
create table Tag (id bigint not null, label varchar(255), primary key (id))
create table Tag_Ticket (tags_id bigint not null, tickets_id bigint not null)
create table Ticket (id bigint not null, closeAt timestamp, content varchar(255), createdAt timestamp, title varchar(255), author_id bigint, primary key (id))
create table User (id bigint not null, name varchar(255), primary key (id))
alter table Discussion add constraint FKnlhgmbi4c0d2wh8ct7rqnrtig foreign key (author_id) references User
alter table Discussion add constraint FKfqtupq1id3j5xyhiovk0lamwt foreign key (ticket_id) references Ticket
alter table Tag_Ticket add constraint FKngiik6u2gyi8oekx6qhby7u7e foreign key (tickets_id) references Ticket
alter table Tag_Ticket add constraint FKdgcd1cknkv09yy5kvgyxwq9yp foreign key (tags_id) references Tag
alter table Ticket add constraint FK9elxf4d28my4akdcnb1099hgi foreign key (author_id) references User
INSERT INTO TAG VALUES(1,'Informatique')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO TAG VALUES(2,'Mecanique')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO TAG VALUES(3,'Developpement')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
DISCONNECT
